<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>问题 | 新时空前端 / 博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="https://www.googletagmanager.com/gtag/js?id=G-1PWBM2M60V" async="true"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-1PWBM2M60V');
      </script>
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.50167129.css" as="style"><link rel="preload" href="/assets/js/app.2055bec6.js" as="script"><link rel="preload" href="/assets/js/5.f3c2ee33.js" as="script"><link rel="preload" href="/assets/js/8.d7c4df9a.js" as="script"><link rel="prefetch" href="/assets/js/2.f0dbe274.js"><link rel="prefetch" href="/assets/js/3.9dcbc3f6.js"><link rel="prefetch" href="/assets/js/4.e36660d0.js"><link rel="prefetch" href="/assets/js/6.e8a915aa.js"><link rel="prefetch" href="/assets/js/7.dd13fe0b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.50167129.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container vuepress-theme-simple"><header class="header"><a href="/" title="" class="site-name router-link-active">
      新时空前端 / 博客
    </a> <div style="clear: both"></div> <!----></header> <section class="post-view"><div class="post-head"><h1 class="post-title">
      问题
    </h1> <time datetime="3/22/2021, 12:00:00 AM" title="3/22/2021, 12:00:00 AM" pubdate="pubdate" class="post-date">
  4 days ago
</time></div> <div class="content__default"><h2 id="js基础"><a href="#js基础" class="header-anchor">#</a> JS基础</h2> <blockquote><h3 id="判断数组"><a href="#判断数组" class="header-anchor">#</a> 判断数组</h3></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ES6</span>

<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// 最可靠</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [object Array]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// [object Object]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>  <span class="token comment">// [object Function]</span>

<span class="token keyword">instanceof</span>
<span class="token comment">// instanceof用于检验构造函数的prototype属性是否出现在对象的原型链中</span>
arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// true</span>
<span class="token comment">/* 相当于 arr.__proto__ === Array.prototype
 * 存在的问题
 * prototype属性可以更改
 * 当有多个全局环境时，例如多个iframe窗口
 * Array.prototype !== iframe.Array.prototype
 */</span>
</code></pre></div><blockquote><h3 id="数组api"><a href="#数组api" class="header-anchor">#</a> 数组api</h3></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ES6 去重</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// O(n^2)</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">===</span> index
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// O(n) 不能区分字符串和数字</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i
<span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token operator">...</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">]</span>

Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>log

<span class="token comment">// ES5</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      j<span class="token operator">--</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 求和</span>
arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">total<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> total <span class="token operator">+</span> item
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><h3 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h3></blockquote> <div class="language-text extra-class"><pre class="language-text"><code>JS事件的三个阶段：捕获阶段，目标阶段，冒泡阶段

捕获阶段：事件从Document节点自上而下向目标节点传播的阶段

目标阶段：目标节点处理事件的阶段

冒泡阶段：事件从目标节点向上传递的阶段

Ps: 以下事件没有冒泡
    onblur、onfocus、onmouseenter、onmouseleave

    addEventListener(event,function,useCapture)
    第三个参数用于设置事件传播类型，默认为false

    event.stopPropagation() 阻止事件传播

    event.preventDefault() 阻止事件默认行为
</code></pre></div><h2 id="浏览器相关"><a href="#浏览器相关" class="header-anchor">#</a> 浏览器相关</h2> <blockquote><h3 id="跨域"><a href="#跨域" class="header-anchor">#</a> 跨域</h3></blockquote> <div class="language-text extra-class"><pre class="language-text"><code>跨域产生的原因：
1. 不同主域名
2. 同一主域名不同子域名
3. 同一域名不同端口
4. 同一域名不同协议
5. 域名和域名对应ip

解决跨域的方法：
1. jsonp
动态添加script src属性，传入参数callback=functionName，后端返回functionName.call(undefined, data)

2. nginx反向代理
location /apis {
  proxy_pass: 后端接口地址
}
当请求以/apis开头时时会被nginx转发到接口地址

3. CORS 跨域共享资源

预检请求：
在发送非简单请求之前，浏览器会先发送一个OPTIONS方法，通过之后浏览器才会发送真正的请求

简单请求：
请求方法为GET、POST、HEAD，人为设置请求头为Accept、Accept-Language、Content-Language、
Content-Type（需要注意额外的限制）、DPR、Downlink、Save-Data、Viewport-Width、Width
Content-Type为text/plain、multipart/form-data、application/x-www-form-urlencoded为简单请求

预检请求request headers包括
Origin：表示请求来自哪个源
Access-Control-Request-Method：表示真实请求将使用的请求方法
Access-Control-Request-Headers：表示真实请求将使用的请求头部

服务器response headers包括
Access-Control-Allow-Origin：表示请求源可以访问
Access-Control-Allow-Methods：表示服务器允许访问的请求方法，可以设置多个，避免多次预检
Access-Control-Allow-Headers：表示服务器允许请求头中携带的字段
Access-Control-Max-Age：表示该响应的有效期，在有效期内无需再次发起预检

对于跨域请求，浏览器不会发送cookie，需要设置withCredentials: &quot;include&quot;
服务器设置响应头Access-Control-Allow-Credentials: true
</code></pre></div><blockquote><h3 id="cookie-sessionstorage-localstorage"><a href="#cookie-sessionstorage-localstorage" class="header-anchor">#</a> cookie sessionStorage localStorage</h3></blockquote> <div class="language-text extra-class"><pre class="language-text"><code>cookie是服务器发给客户端的特殊信息，以文本的方式保存在客户端，每次请求时都带上它
如果不在浏览器中设置过期时间，cookie被保存在内存中，生命周期随浏览器的关闭而结束
如果在浏览器中设置了cookie的过期时间，cookie被保存在硬盘中,直到过期时间结束才消失

缺点：1. 大小一般为4K
     2. 每次请求都需要带上cookie，浪费带宽
     3. 用户可以操作cookie
     
session是服务器创建用来存储各个用户信息的对象，每个用户有唯一的sessionID，并返回给浏览器用cookie保存

缺点：1. 依赖于cookie，用户可以操作cookie
     2. 服务器压力大
     
存储在sessionStorage中的数据会在页面关闭时清除，且相同URL不同Tabs的sessionStorage不共享
存储在localStorage中的数据会永久保存直到被清除
</code></pre></div><blockquote><h3 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h3></blockquote> <div class="language-text extra-class"><pre class="language-text"><code>后端路由：
当用户访问url时，服务器会接收这个请求并解析url中的路径，当匹配成功时，分发到不同的controller处理

前端路由：
利用hash或者history API实现替换url并且不刷新页面

hash模式：
利用onhashchange监听URL的hash符后值的改变，可以用window.location.hash读取
hash模式下，仅hash符前的内容会被包含在请求中，因此对后端来说，即使没有配置路由也不会返回404

history模式：
利用pushState和replaceState替换url，并且不发起http请求，当刷新页面或者直接访问路径的时候会返回404
因此前端的URL必须和实际向后端发起请求的URL一致
</code></pre></div><blockquote><h3 id="懒加载"><a href="#懒加载" class="header-anchor">#</a> 懒加载</h3></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    mode<span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>
    base<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
            name<span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 原理解析 https://segmentfault.com/a/1190000022846552</span>
</code></pre></div><blockquote><h3 id="eventloop"><a href="#eventloop" class="header-anchor">#</a> EventLoop</h3></blockquote> <blockquote><h3 id="模块化"><a href="#模块化" class="header-anchor">#</a> 模块化</h3></blockquote> <blockquote><h3 id="服务端渲染"><a href="#服务端渲染" class="header-anchor">#</a> 服务端渲染</h3></blockquote></div> <div></div></section> <footer class="footer">
  © 2021
  <i class="icon-user"></i> <a href="https://www.nst-fe.site/" target="_blank">
    nst-fe
  </a> <br>
  Powered by
  <a href="https://vuepress.vuejs.org/" rel="noopener" target="_blank">VuePress</a>
  | Theme
  <a href="https://github.com/viko16/vuepress-theme-simple" rel="noopener" target="_blank">Simple</a></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2055bec6.js" defer></script><script src="/assets/js/5.f3c2ee33.js" defer></script><script src="/assets/js/8.d7c4df9a.js" defer></script>
  </body>
</html>
