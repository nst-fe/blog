<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>åˆå­¦äº†ç‚¹ TypeScript | æ–°æ—¶ç©ºå‰ç«¯ / åšå®¢</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="https://www.googletagmanager.com/gtag/js?id=G-1PWBM2M60V" async="true"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-1PWBM2M60V');
      </script>
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.50167129.css" as="style"><link rel="preload" href="/assets/js/app.91149c9d.js" as="script"><link rel="preload" href="/assets/js/6.f3d100af.js" as="script"><link rel="preload" href="/assets/js/9.462d9870.js" as="script"><link rel="prefetch" href="/assets/js/10.91d20650.js"><link rel="prefetch" href="/assets/js/2.36b38fb9.js"><link rel="prefetch" href="/assets/js/3.9ca748ea.js"><link rel="prefetch" href="/assets/js/4.1b739ec1.js"><link rel="prefetch" href="/assets/js/5.a4a0ee20.js"><link rel="prefetch" href="/assets/js/7.698a7e7e.js"><link rel="prefetch" href="/assets/js/8.26867aca.js">
    <link rel="stylesheet" href="/assets/css/0.styles.50167129.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container vuepress-theme-simple"><header class="header"><a href="/" title="" class="site-name router-link-active">
      æ–°æ—¶ç©ºå‰ç«¯ / åšå®¢
    </a> <div style="clear: both"></div> <!----></header> <section class="post-view"><div class="post-head"><h1 class="post-title">
      åˆå­¦äº†ç‚¹ TypeScript
    </h1> <time datetime="3/26/2021, 12:00:00 AM" title="3/26/2021, 12:00:00 AM" pubdate="pubdate" class="post-date">
  4 days ago
</time></div> <div class="content__default"><p>ä¸¤å¹´å‰ï¼Œå› ä¸ºé¡¹ç›®ä½¿ç”¨ Anguar ï¼Œä»¥æ­¤å…¥äº† TypeScript çš„å‘ã€‚åæ¥ï¼Œå·¥ä½œçš„æŠ€æœ¯æ ˆæ¸æ¸è½¬å‘äº† React  åˆ°ç°åœ¨çš„ Vueï¼Œè¿™æœŸé—´éƒ½ç”¨çš„ ES6ï¼ŒTS ä¾¿æ¸æ¸ç”Ÿç–äº†ã€‚æœ€è¿‘ï¼Œå…¬å¸æ–°æ¥çš„åŒäº‹åœ¨æ­ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œå› ä¸ºä¹‹å‰èŠçš„æ—¶å€™çŸ¥é“ä»–ç”¨è¿‡ TSï¼Œä¾¿å»ºè®®äº†ä»–ç”¨ TS æ¥å¼„äº†ã€‚è™½ç„¶ Vue3 å·²ç»å¯ç”¨äº†ï¼Œä½†æ˜¯ç”±äº Proxy çš„å…¼å®¹æ€§å¯èƒ½å¸¦æ¥è¾ƒå¤§çš„éšæ‚£ï¼Œè¿˜æ˜¯é€‰ç”¨ Vue2 + TSï¼ˆä¸‹æ–‡æ‰€è¿°éƒ½æ˜¯ Vue2.xï¼‰ã€‚å®é™…ä¸Šä»ä¹‹å‰ä¸€äº›ç¥è§çš„èµ„æ–™ï¼Œäº†è§£åˆ° Vue å¯¹ TS ä¸æ˜¯å¾ˆå‹å¥½ï¼Œä½†æ˜¯ TS åœ¨å‰ç«¯é¡¹ç›®ä¸­çš„å æœ‰ç‡æ—¥ç›Šå¢é•¿ï¼Œåœ¨å…¬å¸å†…æœ‰å¿…è¦æ¥æ¨è¿›äº†ã€‚è€Œä¸”åŒäº‹å¯¹æ­¤æœ‰ä¸€å®šçš„ç»éªŒï¼Œé¡¹ç›®ç®—æ¯”è¾ƒå°ï¼Œæ­£æ˜¯å®éªŒå¥½æ—¶æœºã€‚æ–°é¡¹ç›®çš„æ¶å­æ­å¥½åï¼Œä»”ç»†çœ‹äº†ä¸‹ï¼Œä¸çŸ¥é“æ˜¯ä¹‹å‰çš„ Angular + TS æ­é…çš„å¤ªè‡ªç„¶ï¼Œè¿˜æ˜¯ä¹‹å‰æˆ‘ç”¨ any å¤ªå¤šğŸ˜ï¼ŒVue + TS æ•´çš„åƒå˜äº†ä¸ªæ¡†æ¶ï¼Œå¤æ‚çš„å¾ˆã€‚è€Œä¸” TS ä¹Ÿå¤šäº†äº›æ–°çš„ç‰¹æ€§éœ€è¦ç†è§£ï¼Œå€Ÿæ­¤æœºä¼šåˆ†æä¸‹ Vue + TS ä»¥åŠæ¡æ¡å¤ªä¹…æœªæ‘¸çš„ TSã€‚</p> <p>Vue æœ¬èº«ä¸æ˜¯ä½¿ç”¨ TS ç¼–å†™çš„ï¼Œæ‰€ä»¥ä½¿ç”¨  <a href="https://www.typescriptlang.org/docs/handbook/declaration-files/templates/module-d-ts.html" target="_blank" rel="noopener noreferrer">Modules .d.ts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„æ–¹å¼ä»¥æ”¯æŒ TS çš„ç±»å‹æ¨æ–­ï¼ˆè§ç±»å‹å®šä¹‰<a href="https://github.com/vuejs/vue/tree/dev/types" target="_blank" rel="noopener noreferrer">ä»“åº“<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ã€‚æŸ¥çœ‹ Vue  çš„ package.json å¯ä»¥çœ‹åˆ° typings çš„é…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> 
	<span class="token property">&quot;typings&quot;</span><span class="token operator">:</span> <span class="token string">&quot;types/index.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token comment">// ä½¿ç”¨ types å­—æ®µä½œç”¨ä¸€æ ·</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ­¤é…ç½®å°±æ˜¯å‘ŠçŸ¥ TS å¯¹ Vue ç›¸å…³çš„ç±»å‹åœ¨å“ªé‡Œæ‰¾ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨å¦‚ä¸‹çš„å†™æ³•å†™ Vue äº†ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token comment">// Vue çš„é€‰é¡¹é…ç½®</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™é‡Œå­¤é›¶é›¶çš„ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼ŒTS æ˜¾ç„¶æ˜¯ä¸èƒ½çŸ¥é“è¿™é‡Œæ˜¯åº”è¯¥å— Vue é€‰é¡¹çº¦æŸçš„ã€‚å› æ­¤å¾—ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å› ä¸º Vue.extend æ–¹æ³•ï¼Œæ˜¯åœ¨ vue.d.ts ä¸­æœ‰å®šä¹‰ï¼Œä»¥ä¸‹æ˜¯æˆªå–çš„å®šä¹‰ç‰‡æ®µï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">...</span>
<span class="token generic-function"><span class="token function">extend</span><span class="token generic class-name"><span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> Methods<span class="token punctuation">,</span> Computed<span class="token punctuation">,</span> PropNames <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token builtin">never</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>options<span class="token operator">?</span><span class="token operator">:</span> ThisTypedComponentOptionsWithArrayProps<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Methods<span class="token punctuation">,</span> Computed<span class="token punctuation">,</span> PropNames<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> ExtendedVue<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Methods<span class="token punctuation">,</span> Computed<span class="token punctuation">,</span> Record<span class="token operator">&lt;</span>PropNames<span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
<span class="token comment">// https://github.com/vuejs/vue/blob/529016bca92f6f098e903b1f77c70d3b0dadefaa/types/vue.d.ts#L86</span>
</code></pre></div><p>ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ° Vue ä¸ºäº†ä½¿å„ç§é…ç½®èƒ½å¤Ÿå®ç°è¾ƒå¥½çš„æ¨æ–­æ•ˆæœï¼Œå£°æ˜å†™çš„æŒºå¤æ‚ï¼Œå…¶ä¸­æˆ‘æ¯”è¾ƒå¥½å¥‡çš„æ˜¯å®ƒæ€ä¹ˆå®ç°çš„  this æ¨æ–­çš„ï¼ˆç‰¹åˆ«æ˜¯åæœŸé€šè¿‡é…ç½®è‡ªå®šä¹‰çš„å±æ€§ï¼‰ï¼Ÿé€šè¿‡é˜…è¯»å…¶å®šä¹‰ä»£ç ï¼Œå‘ç°äº†è¿™æ ·ä¸€å¥ï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">ThisTypedComponentOptionsWithRecordProps<span class="token operator">&lt;</span><span class="token constant">V</span> <span class="token keyword">extends</span> Vue<span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Methods<span class="token punctuation">,</span> Computed<span class="token punctuation">,</span> Props<span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  object <span class="token operator">&amp;</span>
  ComponentOptions<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token punctuation">,</span> DataDef<span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> Props<span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> Methods<span class="token punctuation">,</span> Computed<span class="token punctuation">,</span> RecordPropsDefinition<span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span><span class="token punctuation">,</span> Props<span class="token operator">&gt;</span> <span class="token operator">&amp;</span>
  ThisType<span class="token operator">&lt;</span>CombinedVueInstance<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Methods<span class="token punctuation">,</span> Computed<span class="token punctuation">,</span> Readonly<span class="token operator">&lt;</span>Props<span class="token operator">&gt;&gt;&gt;</span><span class="token punctuation">;</span>
<span class="token comment">// https://github.com/vuejs/vue/blob/529016bca92f6f098e903b1f77c70d3b0dadefaa/types/options.d.ts#L58</span>
</code></pre></div><p>å…¶ä¸­çš„ ThisType å°±æ˜¯å®ç° this æ¨æ–­çš„å…³é”®ã€‚ThistType çš„ä½œç”¨å°±æ˜¯å¯ä»¥å®šä¹‰ä¸Šä¸‹æ–‡çš„ç±»å‹ï¼Œè¦æ³¨æ„çš„æ˜¯å¿…é¡»è¦å¼€å¯ <code>--noImplicitThis</code> ä»¥é…åˆä½¿ç”¨ï¼ˆæ›´å¤šè§£é‡Šè¯´æ˜è§<a href="https://www.typescriptlang.org/docs/handbook/utility-types.html#thistypetype" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)ã€‚ä¸‹é¢æˆ‘é€šè¿‡ä¸€ä¸ªç®€åŒ–çš„ Vue å®šä¹‰ç®€å•æ¼”ç¤ºï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">DemoVue</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> $el<span class="token operator">:</span> Element<span class="token punctuation">;</span>
  <span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">DefaultData<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> object <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Object<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">DefaultMethods<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">ComponentOptions<span class="token operator">&lt;</span>
  <span class="token constant">V</span> <span class="token keyword">extends</span> DemoVue<span class="token punctuation">,</span>
  Data <span class="token operator">=</span> DefaultData<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  Methods <span class="token operator">=</span> DefaultMethods<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  data<span class="token operator">?</span><span class="token operator">:</span> Data<span class="token punctuation">;</span>
  methods<span class="token operator">?</span><span class="token operator">:</span> Methods<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * è¯¥è”åˆç±»å‹çš„å£°æ˜çš„ååŠéƒ¨åˆ† ((this: V) =&gt; Data)
 * ä½¿å¾—æˆ‘ä»¬åœ¨ä½¿ç”¨ data () { return { xx: 'xx' } } å½¢å¼å£°æ˜æ•°æ®æ—¶ï¼Œå…¶è¿”å›çš„å¯¹è±¡ä½œä¸º Data ç±»å‹ï¼Œ
 * ç»“åˆ ThisType&lt;Data&gt; ä½¿ this å—åˆ° Data çš„çº¦æŸ
 */</span>
<span class="token keyword">type</span> <span class="token class-name">DataDef<span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Data <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Data<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">CombinedVueInstance<span class="token operator">&lt;</span>Instance <span class="token keyword">extends</span> DemoVue<span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Methods<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Data <span class="token operator">&amp;</span>
  Methods <span class="token operator">&amp;</span>
  Instance<span class="token punctuation">;</span>

<span class="token comment">/**
 * åœ¨äº¤å‰ç±»å‹çš„æœ€åéƒ¨åˆ† ThisType çš„æ³›å‹ç±»å‹å€¼æˆ‘ä»¬ç»™å®šçš„ä¸º CombinedVueInstance ç±»å‹ï¼Œ
 * å¯åœ¨ä¸Šæ–¹ä»£ç çœ‹åˆ°å®é™…ä¸Šå…¶ä¸ºå®ä¾‹å¯¹è±¡ã€Dataã€Methods çš„äº¤å‰ç±»å‹ï¼Œæ‰€ä»¥æœ€ç»ˆ this å—åˆ° CombinedVueInstance çš„çº¦æŸ
 */</span>
<span class="token keyword">type</span> <span class="token class-name">ThisComponentOptions<span class="token operator">&lt;</span><span class="token constant">V</span> <span class="token keyword">extends</span> DemoVue<span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Methods<span class="token operator">&gt;</span></span> <span class="token operator">=</span> object <span class="token operator">&amp;</span>
  ComponentOptions<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token punctuation">,</span> DataDef<span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> Methods<span class="token operator">&gt;</span> <span class="token operator">&amp;</span>
  ThisType<span class="token operator">&lt;</span>CombinedVueInstance<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Methods<span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">DemoVueConstructor<span class="token operator">&lt;</span><span class="token constant">V</span> <span class="token keyword">extends</span> DemoVue <span class="token operator">=</span> DemoVue<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token generic-function"><span class="token function">extend</span><span class="token generic class-name"><span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> Methods<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>options<span class="token operator">:</span> ThisComponentOptions<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Methods<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> DemoVue<span class="token operator">:</span> DemoVueConstructor <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

DemoVue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ¯”å¦‚æˆ‘ä»¬åœ¨ VSCode é‡Œï¼ŒæŠŠé¼ æ ‡æ”¾åœ¨ this ä¸Šæ—¶ï¼Œæ˜¾ç¤ºçš„ this ç±»å‹å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ° this å·²ç»åŒ…å«æˆ‘ä»¬åœ¨ data å’Œ methods ä¸­å®šä¹‰çš„å±æ€§äº†ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>CombinedVueInstance<span class="token operator">&lt;</span>DemoVue<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><p>ç„¶è€Œåœ¨ TS + Vue çš„å®è·µä¸­ï¼Œä¸€èˆ¬ä¸é‡‡ç”¨ Vue.extend() çš„æ–¹å¼ä¹¦å†™ï¼Œè€Œæ˜¯ä½¿ç”¨ Class çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨ <a href="https://github.com/vuejs/vue-class-component" target="_blank" rel="noopener noreferrer">vue-class-component<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æä¾›çš„è£…é¥°å™¨ã€‚ç”±äºæ²¡æœ‰å¤§é‡çš„ TS + Vue é¡¹ç›®ç»éªŒï¼Œä¸¤ç§æ–¹å¼ä¹‹é—´å…·ä½“å­°ä¼˜å­°åŠ£å¹¶ä¸æ¸…æ¥šã€‚ä½†å¯ä»¥æ¯”è¾ƒç›´è§‚çš„æ„Ÿå—åˆ°çš„å°±æ˜¯  Vue.extend()  è¿™ç§åœ¨å¯¹è±¡å­—é¢é‡ä¸­é…åˆç±»å‹å®šä¹‰ç¡®å®ç»“æ„ä¸å¤ªæ¸…æ™°ã€‚</p> <p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ vue-class-component æä¾›çš„è£…é¥°å™¨å¹²äº†äº›ä»€ä¹ˆã€‚ä¸‹é¢æ˜¯<a href="https://cn.vuejs.org/v2/guide/typescript.html#%E5%9F%BA%E4%BA%8E%E7%B1%BB%E7%9A%84-Vue-%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ‰€æä¾›çš„æ­¤æ–¹å¼çš„ç¤ºä¾‹ï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Component <span class="token keyword">from</span> <span class="token string">'vue-class-component'</span>

<span class="token comment">// @Component ä¿®é¥°ç¬¦æ³¨æ˜äº†æ­¤ç±»ä¸ºä¸€ä¸ª Vue ç»„ä»¶</span>
@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// æ‰€æœ‰çš„ç»„ä»¶é€‰é¡¹éƒ½å¯ä»¥æ”¾åœ¨è¿™é‡Œ</span>
  template<span class="token operator">:</span> <span class="token string">'&lt;button @click=&quot;onClick&quot;&gt;Click!&lt;/button&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
  <span class="token comment">// åˆå§‹æ•°æ®å¯ä»¥ç›´æ¥å£°æ˜ä¸ºå®ä¾‹çš„ property</span>
  message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Hello!'</span>

  <span class="token comment">// ç»„ä»¶æ–¹æ³•ä¹Ÿå¯ä»¥ç›´æ¥å£°æ˜ä¸ºå®ä¾‹çš„æ–¹æ³•</span>
  <span class="token function">onClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å—¯ï¼Œç¡®å®æ˜¯æ¯”è¾ƒæ–¹ä¾¿å’Œæ¸…æ™°çš„ï¼Œé‚£è¿™ä¸ª <code>@Component</code> è£…é¥°å™¨åˆ°åº•åšäº†ä»€ä¹ˆï¼ŸæŸ¥çœ‹å…¶æºç ï¼Œè¿™ä¸ªè£…é¥°å™¨çš„æœ€ç»ˆé€»è¾‘ä¼šèµ°åˆ°è¯¥å‡½æ•°ï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">componentFactory</span> <span class="token punctuation">(</span>
  Component<span class="token operator">:</span> VueClass<span class="token operator">&lt;</span>Vue<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  options<span class="token operator">:</span> ComponentOptions<span class="token operator">&lt;</span>Vue<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token operator">:</span> VueClass<span class="token operator">&lt;</span>Vue<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
      <span class="token keyword">const</span> Extended <span class="token operator">=</span> Super<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
      <span class="token operator">...</span>
      <span class="token keyword">return</span> Extended
  <span class="token punctuation">}</span>
<span class="token operator">...</span>
<span class="token comment">// https://github.com/vuejs/vue-class-component/blob/16433462b40aefecc030919623f17b0ec9afe61c/src/component.ts#L24</span>
</code></pre></div><p>å…¶ä¸­æ¯”è¾ƒå…³é”®çš„å°±æ˜¯è¿™å¥ <code>const Extended = Super.extend(options)</code> , è¿™é‡Œçš„ Super è¦ä¹ˆå°±æ˜¯ Vue ç±»ï¼Œè¦ä¹ˆæ˜¯ç»§æ‰¿äº† Vue çš„å­ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ Super.extend å®é™…ä¸Šå°±æ˜¯è°ƒç”¨çš„ Vue.extend()ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰ä»€ä¹ˆé­”æ³•ï¼Œæ®Šé€”åŒå½’ã€‚ç„¶åè¯¥å‡½æ•°ä¸»è¦çš„é€»è¾‘å°±æ˜¯æŠŠæˆ‘ä»¬åœ¨ Class ä¸Šå£°æ˜çš„å±æ€§å’Œæ–¹æ³•ä»¥ç‰¹å®šçš„é€»è¾‘è½¬ä¸º Vue.extend é…ç½®å¯¹è±¡çš„å¯¹åº”é…ç½®é¡¹ã€‚</p> <p>å¦å¤–è¿˜æœ‰ä¸€ä¸ª <strong><a href="https://github.com/kaorun343/vue-property-decorator" target="_blank" rel="noopener noreferrer"> vue-property-decorator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> ä¹Ÿç®—æ˜¯ Vue + TS çš„æ ‡é…äº†ï¼Œå®ƒä¸»è¦æ˜¯ä½¿ç”¨ vue-class-component æä¾›çš„ <a href="https://github.com/vuejs/vue-class-component/blob/16433462b40aefecc030919623f17b0ec9afe61c/src/util.ts#L20" target="_blank" rel="noopener noreferrer">createDecorator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  æ–¹æ³•æ‰©å±•äº†å‡ ä¸ªè£…é¥°å™¨ã€‚æ¯”å¦‚å£°æ˜ props å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é…ç½®é¡¹:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@Component
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">YourComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
  @<span class="token function">Prop</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span> <span class="token keyword">readonly</span> propA<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
  @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'default value'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">readonly</span> propB<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span>
  @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">[</span>String<span class="token punctuation">,</span> Boolean<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">readonly</span> propC<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“ç„¶å…¶æœ€ç»ˆçš„é€»è¾‘ä¹Ÿæ˜¯å¸®æˆ‘ä»¬æŠŠä»¥ç±»æˆå‘˜æ–¹å¼ä¹¦å†™çš„é…ç½®è½¬åŒ–ä¸º Vue.extend é…ç½®å¯¹è±¡çš„å¯¹åº”é…ç½®é¡¹ã€‚</p> <hr> <p>ä½œè€…: <a href="https://github.com/cj0x39e" target="_blank" rel="noopener noreferrer">cj0x39e<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <div></div></section> <footer class="footer">
  Â© 2021
  <i class="icon-user"></i> <a href="https://www.nst-fe.site/" target="_blank">
    nst-fe
  </a> <br>
  Powered by
  <a href="https://vuepress.vuejs.org/" rel="noopener" target="_blank">VuePress</a>
  | Theme
  <a href="https://github.com/viko16/vuepress-theme-simple" rel="noopener" target="_blank">Simple</a></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.91149c9d.js" defer></script><script src="/assets/js/6.f3d100af.js" defer></script><script src="/assets/js/9.462d9870.js" defer></script>
  </body>
</html>
